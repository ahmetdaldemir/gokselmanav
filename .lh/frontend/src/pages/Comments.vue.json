{
    "sourceFile": "frontend/src/pages/Comments.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1750636587685,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1750636587685,
            "name": "Commit-0",
            "content": "<template>\r\n  <div class=\"comments-page\">\r\n    <h1>Müşteri Yorumları</h1>\r\n    \r\n    <div class=\"content\">\r\n      <!-- İstatistikler -->\r\n      <section class=\"stats-section\">\r\n        <div class=\"stats-card\">\r\n          <div class=\"rating-display\">\r\n            <div class=\"average-rating\">\r\n              <span class=\"rating-number\">{{ stats.averageRating }}</span>\r\n              <div class=\"stars\">\r\n                <span v-for=\"i in 5\" :key=\"i\" class=\"star\" :class=\"{ filled: i <= Math.round(stats.averageRating) }\">★</span>\r\n              </div>\r\n            </div>\r\n            <div class=\"rating-info\">\r\n              <p class=\"total-comments\">{{ stats.totalComments }} yorum</p>\r\n              <p class=\"rating-text\">Ortalama puan</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      <!-- Yorum Ekleme Formu -->\r\n      <section class=\"comment-form-section\">\r\n        <h2>Yorum Yap</h2>\r\n        <form @submit.prevent=\"submitComment\" class=\"comment-form\">\r\n          <div class=\"form-row\">\r\n            <div class=\"form-group\">\r\n              <label for=\"name\">Adınız Soyadınız *</label>\r\n              <input \r\n                type=\"text\" \r\n                id=\"name\" \r\n                v-model=\"newComment.name\" \r\n                required\r\n                :disabled=\"isSubmitting\"\r\n              >\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label for=\"email\">E-posta Adresiniz *</label>\r\n              <input \r\n                type=\"email\" \r\n                id=\"email\" \r\n                v-model=\"newComment.email\" \r\n                required\r\n                :disabled=\"isSubmitting\"\r\n              >\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"form-group\">\r\n            <label>Puanınız *</label>\r\n            <div class=\"rating-input\">\r\n              <span \r\n                v-for=\"i in 5\" \r\n                :key=\"i\" \r\n                class=\"star-input\" \r\n                :class=\"{ filled: i <= newComment.rating }\"\r\n                @click=\"newComment.rating = i\"\r\n                @mouseenter=\"hoverRating = i\"\r\n                @mouseleave=\"hoverRating = 0\"\r\n              >\r\n                ★\r\n              </span>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"form-group\">\r\n            <label for=\"comment\">Yorumunuz *</label>\r\n            <textarea \r\n              id=\"comment\" \r\n              v-model=\"newComment.comment\" \r\n              rows=\"4\" \r\n              required\r\n              :disabled=\"isSubmitting\"\r\n              placeholder=\"Deneyiminizi paylaşın...\"\r\n            ></textarea>\r\n          </div>\r\n          \r\n          <button type=\"submit\" class=\"btn-submit\" :disabled=\"isSubmitting\">\r\n            {{ isSubmitting ? 'Gönderiliyor...' : 'Yorumu Gönder' }}\r\n          </button>\r\n        </form>\r\n      </section>\r\n\r\n      <!-- Yorumlar Listesi -->\r\n      <section class=\"comments-list-section\">\r\n        <h2>Müşteri Yorumları</h2>\r\n        \r\n        <div v-if=\"loading\" class=\"loading\">\r\n          Yorumlar yükleniyor...\r\n        </div>\r\n        \r\n        <div v-else-if=\"comments.length === 0\" class=\"no-comments\">\r\n          Henüz yorum yapılmamış. İlk yorumu siz yapın!\r\n        </div>\r\n        \r\n        <div v-else class=\"comments-list\">\r\n          <div v-for=\"comment in comments\" :key=\"comment.id\" class=\"comment-item\">\r\n            <div class=\"comment-header\">\r\n              <div class=\"commenter-info\">\r\n                <h3 class=\"commenter-name\">{{ comment.name }}</h3>\r\n                <div class=\"comment-rating\">\r\n                  <span v-for=\"i in 5\" :key=\"i\" class=\"star\" :class=\"{ filled: i <= comment.rating }\">★</span>\r\n                </div>\r\n              </div>\r\n              <div class=\"comment-date\">\r\n                {{ formatDate(comment.createdAt) }}\r\n              </div>\r\n            </div>\r\n            <div class=\"comment-content\">\r\n              <p>{{ comment.comment }}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onMounted } from 'vue'\r\nimport axios from 'axios'\r\n\r\ninterface Comment {\r\n  id: number\r\n  name: string\r\n  email: string\r\n  comment: string\r\n  rating: number\r\n  createdAt: string\r\n}\r\n\r\ninterface Stats {\r\n  averageRating: number\r\n  totalComments: number\r\n  ratingDistribution: Record<number, number>\r\n}\r\n\r\nconst comments = ref<Comment[]>([])\r\nconst stats = ref<Stats>({\r\n  averageRating: 0,\r\n  totalComments: 0,\r\n  ratingDistribution: { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 }\r\n})\r\nconst loading = ref(false)\r\nconst isSubmitting = ref(false)\r\nconst hoverRating = ref(0)\r\n\r\nconst newComment = ref({\r\n  name: '',\r\n  email: '',\r\n  comment: '',\r\n  rating: 5\r\n})\r\n\r\nonMounted(async () => {\r\n  await loadComments()\r\n  await loadStats()\r\n})\r\n\r\nconst loadComments = async () => {\r\n  loading.value = true\r\n  try {\r\n    const response = await axios.get('/backend/comments')\r\n    comments.value = response.data\r\n  } catch (error) {\r\n    console.error('Yorumlar yüklenemedi:', error)\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nconst loadStats = async () => {\r\n  try {\r\n    const response = await axios.get('/backend/comments/stats')\r\n    stats.value = response.data\r\n  } catch (error) {\r\n    console.error('İstatistikler yüklenemedi:', error)\r\n  }\r\n}\r\n\r\nconst submitComment = async () => {\r\n  if (!newComment.value.name || !newComment.value.email || !newComment.value.comment) {\r\n    return\r\n  }\r\n\r\n  isSubmitting.value = true\r\n  try {\r\n    await axios.post('/backend/comments', newComment.value)\r\n    \r\n    // Formu temizle\r\n    newComment.value = {\r\n      name: '',\r\n      email: '',\r\n      comment: '',\r\n      rating: 5\r\n    }\r\n    \r\n    // Yorumları ve istatistikleri yenile\r\n    await loadComments()\r\n    await loadStats()\r\n    \r\n    alert('Yorumunuz başarıyla gönderildi!')\r\n  } catch (error) {\r\n    console.error('Yorum gönderilemedi:', error)\r\n    alert('Yorum gönderilirken bir hata oluştu. Lütfen tekrar deneyin.')\r\n  } finally {\r\n    isSubmitting.value = false\r\n  }\r\n}\r\n\r\nconst formatDate = (dateString: string) => {\r\n  const date = new Date(dateString)\r\n  return date.toLocaleDateString('tr-TR', {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric'\r\n  })\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.comments-page {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  padding: 2rem;\r\n  background: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 8px rgba(0,0,0,0.1);\r\n}\r\n\r\nh1 {\r\n  color: #2c3e50;\r\n  text-align: center;\r\n  margin-bottom: 2rem;\r\n  font-size: 2rem;\r\n}\r\n\r\n.content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 2rem;\r\n}\r\n\r\n.stats-section {\r\n  background: #f8f9fa;\r\n  padding: 2rem;\r\n  border-radius: 8px;\r\n}\r\n\r\n.stats-card {\r\n  text-align: center;\r\n}\r\n\r\n.rating-display {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 1rem;\r\n}\r\n\r\n.average-rating {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.rating-number {\r\n  font-size: 3rem;\r\n  font-weight: bold;\r\n  color: #42b983;\r\n}\r\n\r\n.stars {\r\n  display: flex;\r\n  gap: 0.2rem;\r\n}\r\n\r\n.star {\r\n  font-size: 1.5rem;\r\n  color: #ddd;\r\n  cursor: default;\r\n}\r\n\r\n.star.filled {\r\n  color: #f7b500;\r\n}\r\n\r\n.rating-info {\r\n  text-align: left;\r\n}\r\n\r\n.total-comments {\r\n  font-size: 1.2rem;\r\n  font-weight: 600;\r\n  color: #2c3e50;\r\n  margin: 0;\r\n}\r\n\r\n.rating-text {\r\n  color: #666;\r\n  margin: 0;\r\n}\r\n\r\n.comment-form-section {\r\n  border: 1px solid #eee;\r\n  border-radius: 8px;\r\n  padding: 2rem;\r\n}\r\n\r\n.comment-form-section h2 {\r\n  color: #2c3e50;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.form-row {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 1rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.form-group label {\r\n  display: block;\r\n  margin-bottom: 0.5rem;\r\n  font-weight: 500;\r\n  color: #333;\r\n}\r\n\r\n.form-group input,\r\n.form-group textarea {\r\n  width: 100%;\r\n  padding: 0.75rem;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 1rem;\r\n  font-family: inherit;\r\n}\r\n\r\n.form-group input:focus,\r\n.form-group textarea:focus {\r\n  outline: none;\r\n  border-color: #42b983;\r\n}\r\n\r\n.rating-input {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.star-input {\r\n  font-size: 2rem;\r\n  color: #ddd;\r\n  cursor: pointer;\r\n  transition: color 0.2s;\r\n}\r\n\r\n.star-input.filled {\r\n  color: #f7b500;\r\n}\r\n\r\n.star-input:hover {\r\n  color: #f7b500;\r\n}\r\n\r\n.btn-submit {\r\n  width: 100%;\r\n  padding: 1rem;\r\n  background: #42b983;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  font-size: 1rem;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.btn-submit:hover:not(:disabled) {\r\n  background: #3aa876;\r\n}\r\n\r\n.btn-submit:disabled {\r\n  background: #ccc;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.comments-list-section h2 {\r\n  color: #2c3e50;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.loading,\r\n.no-comments {\r\n  text-align: center;\r\n  padding: 2rem;\r\n  color: #666;\r\n}\r\n\r\n.comments-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1.5rem;\r\n}\r\n\r\n.comment-item {\r\n  border: 1px solid #eee;\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n  background: #fafafa;\r\n}\r\n\r\n.comment-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.commenter-info {\r\n  flex: 1;\r\n}\r\n\r\n.commenter-name {\r\n  margin: 0 0 0.5rem 0;\r\n  color: #2c3e50;\r\n  font-size: 1.1rem;\r\n}\r\n\r\n.comment-rating {\r\n  display: flex;\r\n  gap: 0.2rem;\r\n}\r\n\r\n.comment-date {\r\n  color: #999;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.comment-content p {\r\n  margin: 0;\r\n  color: #555;\r\n  line-height: 1.6;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .comments-page {\r\n    padding: 1rem;\r\n    margin: 0.5rem;\r\n  }\r\n  \r\n  h1 {\r\n    font-size: 1.5rem;\r\n  }\r\n  \r\n  .form-row {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  \r\n  .comment-header {\r\n    flex-direction: column;\r\n    gap: 0.5rem;\r\n  }\r\n  \r\n  .rating-display {\r\n    flex-direction: column;\r\n    gap: 1rem;\r\n  }\r\n}\r\n</style> "
        }
    ]
}