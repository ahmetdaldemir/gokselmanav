{
    "sourceFile": "frontend/src/views/AccountView.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1750614955004,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1750614977883,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,16 +20,19 @@\n         <div class=\"account-main\">\r\n           <!-- Profile Section -->\r\n           <div v-if=\"currentTab === 'profile'\" class=\"profile-section\">\r\n             <h2>Profil Bilgileri</h2>\r\n+            <div v-if=\"error\" class=\"error-message\">{{ error }}</div>\r\n+            <div v-if=\"success\" class=\"success-message\">{{ success }}</div>\r\n             <form @submit.prevent=\"updateProfile\" class=\"profile-form\">\r\n               <div class=\"form-group\">\r\n                 <label for=\"firstName\">Ad</label>\r\n                 <input \r\n                   type=\"text\" \r\n                   id=\"firstName\" \r\n                   v-model=\"profile.firstName\" \r\n                   required\r\n+                  :disabled=\"isLoading\"\r\n                 >\r\n               </div>\r\n               <div class=\"form-group\">\r\n                 <label for=\"lastName\">Soyad</label>\r\n@@ -37,8 +40,9 @@\n                   type=\"text\" \r\n                   id=\"lastName\" \r\n                   v-model=\"profile.lastName\" \r\n                   required\r\n+                  :disabled=\"isLoading\"\r\n                 >\r\n               </div>\r\n               <div class=\"form-group\">\r\n                 <label for=\"email\">E-posta</label>\r\n@@ -46,33 +50,40 @@\n                   type=\"email\" \r\n                   id=\"email\" \r\n                   v-model=\"profile.email\" \r\n                   required\r\n+                  :disabled=\"isLoading\"\r\n                 >\r\n               </div>\r\n               <div class=\"form-group\">\r\n                 <label for=\"phone\">Telefon</label>\r\n                 <input \r\n                   type=\"tel\" \r\n                   id=\"phone\" \r\n                   v-model=\"profile.phone\"\r\n+                  :disabled=\"isLoading\"\r\n                 >\r\n               </div>\r\n-              <button type=\"submit\" class=\"btn-submit\">Güncelle</button>\r\n+              <button type=\"submit\" class=\"btn-submit\" :disabled=\"isLoading\">\r\n+                {{ isLoading ? 'Güncelleniyor...' : 'Güncelle' }}\r\n+              </button>\r\n             </form>\r\n           </div>\r\n \r\n           <!-- Address Section -->\r\n           <div v-if=\"currentTab === 'address'\" class=\"address-section\">\r\n             <h2>Adres Bilgileri</h2>\r\n+            <div v-if=\"error\" class=\"error-message\">{{ error }}</div>\r\n+            <div v-if=\"success\" class=\"success-message\">{{ success }}</div>\r\n             <form @submit.prevent=\"updateAddress\" class=\"address-form\">\r\n               <div class=\"form-group\">\r\n                 <label for=\"address\">Adres</label>\r\n                 <textarea \r\n                   id=\"address\" \r\n                   v-model=\"address.address\" \r\n                   required\r\n                   rows=\"3\"\r\n+                  :disabled=\"isLoading\"\r\n                 ></textarea>\r\n               </div>\r\n               <div class=\"form-group\">\r\n                 <label for=\"city\">Şehir</label>\r\n@@ -80,8 +91,9 @@\n                   type=\"text\" \r\n                   id=\"city\" \r\n                   v-model=\"address.city\" \r\n                   required\r\n+                  :disabled=\"isLoading\"\r\n                 >\r\n               </div>\r\n               <div class=\"form-group\">\r\n                 <label for=\"postalCode\">Posta Kodu</label>\r\n@@ -89,25 +101,31 @@\n                   type=\"text\" \r\n                   id=\"postalCode\" \r\n                   v-model=\"address.postalCode\" \r\n                   required\r\n+                  :disabled=\"isLoading\"\r\n                 >\r\n               </div>\r\n-              <button type=\"submit\" class=\"btn-submit\">Güncelle</button>\r\n+              <button type=\"submit\" class=\"btn-submit\" :disabled=\"isLoading\">\r\n+                {{ isLoading ? 'Güncelleniyor...' : 'Güncelle' }}\r\n+              </button>\r\n             </form>\r\n           </div>\r\n \r\n           <!-- Password Section -->\r\n           <div v-if=\"currentTab === 'password'\" class=\"password-section\">\r\n             <h2>Şifre Değiştir</h2>\r\n+            <div v-if=\"error\" class=\"error-message\">{{ error }}</div>\r\n+            <div v-if=\"success\" class=\"success-message\">{{ success }}</div>\r\n             <form @submit.prevent=\"updatePassword\" class=\"password-form\">\r\n               <div class=\"form-group\">\r\n                 <label for=\"currentPassword\">Mevcut Şifre</label>\r\n                 <input \r\n                   type=\"password\" \r\n                   id=\"currentPassword\" \r\n                   v-model=\"password.currentPassword\" \r\n                   required\r\n+                  :disabled=\"isLoading\"\r\n                 >\r\n               </div>\r\n               <div class=\"form-group\">\r\n                 <label for=\"newPassword\">Yeni Şifre</label>\r\n@@ -115,8 +133,9 @@\n                   type=\"password\" \r\n                   id=\"newPassword\" \r\n                   v-model=\"password.newPassword\" \r\n                   required\r\n+                  :disabled=\"isLoading\"\r\n                 >\r\n               </div>\r\n               <div class=\"form-group\">\r\n                 <label for=\"confirmPassword\">Yeni Şifre (Tekrar)</label>\r\n@@ -124,11 +143,14 @@\n                   type=\"password\" \r\n                   id=\"confirmPassword\" \r\n                   v-model=\"password.confirmPassword\" \r\n                   required\r\n+                  :disabled=\"isLoading\"\r\n                 >\r\n               </div>\r\n-              <button type=\"submit\" class=\"btn-submit\">Şifre Değiştir</button>\r\n+              <button type=\"submit\" class=\"btn-submit\" :disabled=\"isLoading\">\r\n+                {{ isLoading ? 'Güncelleniyor...' : 'Şifre Değiştir' }}\r\n+              </button>\r\n             </form>\r\n           </div>\r\n         </div>\r\n       </div>\r\n"
                },
                {
                    "date": 1750614984172,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -435,8 +435,26 @@\n .btn-submit:hover {\r\n   background-color: #3aa876;\r\n }\r\n \r\n+.error-message {\r\n+  background-color: #ffebee;\r\n+  color: #c62828;\r\n+  padding: 1rem;\r\n+  border-radius: 4px;\r\n+  margin-bottom: 1rem;\r\n+  border: 1px solid #ffcdd2;\r\n+}\r\n+\r\n+.success-message {\r\n+  background-color: #e8f5e9;\r\n+  color: #2e7d32;\r\n+  padding: 1rem;\r\n+  border-radius: 4px;\r\n+  margin-bottom: 1rem;\r\n+  border: 1px solid #c8e6c9;\r\n+}\r\n+\r\n @media (max-width: 768px) {\r\n   .account-content {\r\n     grid-template-columns: 1fr;\r\n   }\r\n"
                },
                {
                    "date": 1750614991369,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -158,9 +158,9 @@\n   </div>\r\n </template>\r\n \r\n <script setup lang=\"ts\">\r\n-import { ref, reactive, onMounted } from 'vue'\r\n+import { ref, reactive, onMounted, watch } from 'vue'\r\n import { useAuthStore } from '@/stores/auth'\r\n import axios from 'axios'\r\n \r\n const authStore = useAuthStore()\r\n@@ -175,8 +175,14 @@\n const isLoading = ref(false)\r\n const error = ref('')\r\n const success = ref('')\r\n \r\n+// Tab değiştiğinde mesajları temizle\r\n+watch(currentTab, () => {\r\n+  error.value = ''\r\n+  success.value = ''\r\n+})\r\n+\r\n const profile = reactive({\r\n   firstName: '',\r\n   lastName: '',\r\n   email: '',\r\n"
                }
            ],
            "date": 1750614955004,
            "name": "Commit-0",
            "content": "<template>\r\n  <div class=\"account\">\r\n    <div class=\"container\">\r\n      <h1>Hesabım</h1>\r\n\r\n      <div class=\"account-content\">\r\n        <div class=\"account-sidebar\">\r\n          <nav class=\"account-nav\">\r\n            <button \r\n              v-for=\"tab in tabs\" \r\n              :key=\"tab.id\"\r\n              :class=\"{ active: currentTab === tab.id }\"\r\n              @click=\"currentTab = tab.id\"\r\n            >\r\n              {{ tab.name }}\r\n            </button>\r\n          </nav>\r\n        </div>\r\n\r\n        <div class=\"account-main\">\r\n          <!-- Profile Section -->\r\n          <div v-if=\"currentTab === 'profile'\" class=\"profile-section\">\r\n            <h2>Profil Bilgileri</h2>\r\n            <form @submit.prevent=\"updateProfile\" class=\"profile-form\">\r\n              <div class=\"form-group\">\r\n                <label for=\"firstName\">Ad</label>\r\n                <input \r\n                  type=\"text\" \r\n                  id=\"firstName\" \r\n                  v-model=\"profile.firstName\" \r\n                  required\r\n                >\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <label for=\"lastName\">Soyad</label>\r\n                <input \r\n                  type=\"text\" \r\n                  id=\"lastName\" \r\n                  v-model=\"profile.lastName\" \r\n                  required\r\n                >\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <label for=\"email\">E-posta</label>\r\n                <input \r\n                  type=\"email\" \r\n                  id=\"email\" \r\n                  v-model=\"profile.email\" \r\n                  required\r\n                >\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <label for=\"phone\">Telefon</label>\r\n                <input \r\n                  type=\"tel\" \r\n                  id=\"phone\" \r\n                  v-model=\"profile.phone\"\r\n                >\r\n              </div>\r\n              <button type=\"submit\" class=\"btn-submit\">Güncelle</button>\r\n            </form>\r\n          </div>\r\n\r\n          <!-- Address Section -->\r\n          <div v-if=\"currentTab === 'address'\" class=\"address-section\">\r\n            <h2>Adres Bilgileri</h2>\r\n            <form @submit.prevent=\"updateAddress\" class=\"address-form\">\r\n              <div class=\"form-group\">\r\n                <label for=\"address\">Adres</label>\r\n                <textarea \r\n                  id=\"address\" \r\n                  v-model=\"address.address\" \r\n                  required\r\n                  rows=\"3\"\r\n                ></textarea>\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <label for=\"city\">Şehir</label>\r\n                <input \r\n                  type=\"text\" \r\n                  id=\"city\" \r\n                  v-model=\"address.city\" \r\n                  required\r\n                >\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <label for=\"postalCode\">Posta Kodu</label>\r\n                <input \r\n                  type=\"text\" \r\n                  id=\"postalCode\" \r\n                  v-model=\"address.postalCode\" \r\n                  required\r\n                >\r\n              </div>\r\n              <button type=\"submit\" class=\"btn-submit\">Güncelle</button>\r\n            </form>\r\n          </div>\r\n\r\n          <!-- Password Section -->\r\n          <div v-if=\"currentTab === 'password'\" class=\"password-section\">\r\n            <h2>Şifre Değiştir</h2>\r\n            <form @submit.prevent=\"updatePassword\" class=\"password-form\">\r\n              <div class=\"form-group\">\r\n                <label for=\"currentPassword\">Mevcut Şifre</label>\r\n                <input \r\n                  type=\"password\" \r\n                  id=\"currentPassword\" \r\n                  v-model=\"password.currentPassword\" \r\n                  required\r\n                >\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <label for=\"newPassword\">Yeni Şifre</label>\r\n                <input \r\n                  type=\"password\" \r\n                  id=\"newPassword\" \r\n                  v-model=\"password.newPassword\" \r\n                  required\r\n                >\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <label for=\"confirmPassword\">Yeni Şifre (Tekrar)</label>\r\n                <input \r\n                  type=\"password\" \r\n                  id=\"confirmPassword\" \r\n                  v-model=\"password.confirmPassword\" \r\n                  required\r\n                >\r\n              </div>\r\n              <button type=\"submit\" class=\"btn-submit\">Şifre Değiştir</button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, reactive, onMounted } from 'vue'\r\nimport { useAuthStore } from '@/stores/auth'\r\nimport axios from 'axios'\r\n\r\nconst authStore = useAuthStore()\r\n\r\nconst tabs = [\r\n  { id: 'profile', name: 'Profil Bilgileri' },\r\n  { id: 'address', name: 'Adres Bilgileri' },\r\n  { id: 'password', name: 'Şifre Değiştir' }\r\n]\r\n\r\nconst currentTab = ref('profile')\r\nconst isLoading = ref(false)\r\nconst error = ref('')\r\nconst success = ref('')\r\n\r\nconst profile = reactive({\r\n  firstName: '',\r\n  lastName: '',\r\n  email: '',\r\n  phone: ''\r\n})\r\n\r\nconst address = reactive({\r\n  address: '',\r\n  city: '',\r\n  postalCode: ''\r\n})\r\n\r\nconst password = reactive({\r\n  currentPassword: '',\r\n  newPassword: '',\r\n  confirmPassword: ''\r\n})\r\n\r\n// Mevcut kullanıcı bilgilerini yükle\r\nconst loadUserData = async () => {\r\n  try {\r\n    if (authStore.user?.id) {\r\n      const response = await axios.get(`/backend/customers/${authStore.user.id}`)\r\n      const userData = response.data\r\n      \r\n      // Profil bilgilerini doldur\r\n      profile.firstName = userData.firstName || ''\r\n      profile.lastName = userData.lastName || ''\r\n      profile.email = userData.email || ''\r\n      profile.phone = userData.phone || ''\r\n      \r\n      // Adres bilgilerini doldur (eğer varsa)\r\n      if (userData.address) {\r\n        address.address = userData.address || ''\r\n        // Şehir ve posta kodu için ayrı alanlar yoksa adres içinden parse edilebilir\r\n        address.city = ''\r\n        address.postalCode = ''\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error('Kullanıcı bilgileri yüklenemedi:', error)\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  loadUserData()\r\n})\r\n\r\nconst updateProfile = async () => {\r\n  try {\r\n    isLoading.value = true\r\n    error.value = ''\r\n    success.value = ''\r\n    \r\n    if (!authStore.user?.id) {\r\n      error.value = 'Kullanıcı bilgileri bulunamadı'\r\n      return\r\n    }\r\n    \r\n    const updateData = {\r\n      firstName: profile.firstName,\r\n      lastName: profile.lastName,\r\n      email: profile.email,\r\n      phone: profile.phone\r\n    }\r\n    \r\n    await axios.patch(`/backend/customers/${authStore.user.id}`, updateData)\r\n    \r\n    // Auth store'daki kullanıcı bilgilerini güncelle\r\n    authStore.updateUser({\r\n      ...authStore.user,\r\n      ...updateData\r\n    })\r\n    \r\n    success.value = 'Profil bilgileri başarıyla güncellendi!'\r\n  } catch (err: any) {\r\n    console.error('Profil güncelleme hatası:', err)\r\n    error.value = err.response?.data?.message || 'Profil güncellenirken bir hata oluştu'\r\n  } finally {\r\n    isLoading.value = false\r\n  }\r\n}\r\n\r\nconst updateAddress = async () => {\r\n  try {\r\n    isLoading.value = true\r\n    error.value = ''\r\n    success.value = ''\r\n    \r\n    if (!authStore.user?.id) {\r\n      error.value = 'Kullanıcı bilgileri bulunamadı'\r\n      return\r\n    }\r\n    \r\n    const updateData = {\r\n      address: `${address.address}, ${address.city} ${address.postalCode}`.trim()\r\n    }\r\n    \r\n    await axios.patch(`/backend/customers/${authStore.user.id}`, updateData)\r\n    \r\n    success.value = 'Adres bilgileri başarıyla güncellendi!'\r\n  } catch (err: any) {\r\n    console.error('Adres güncelleme hatası:', err)\r\n    error.value = err.response?.data?.message || 'Adres güncellenirken bir hata oluştu'\r\n  } finally {\r\n    isLoading.value = false\r\n  }\r\n}\r\n\r\nconst updatePassword = async () => {\r\n  try {\r\n    if (password.newPassword !== password.confirmPassword) {\r\n      error.value = 'Yeni şifreler eşleşmiyor!'\r\n      return\r\n    }\r\n    \r\n    if (password.newPassword.length < 6) {\r\n      error.value = 'Yeni şifre en az 6 karakter olmalıdır!'\r\n      return\r\n    }\r\n    \r\n    isLoading.value = true\r\n    error.value = ''\r\n    success.value = ''\r\n    \r\n    // Şifre değiştirme için özel bir endpoint gerekebilir\r\n    // Şimdilik mevcut endpoint'i kullanıyoruz\r\n    await axios.patch(`/backend/customers/${authStore.user?.id}`, {\r\n      password: password.newPassword\r\n    })\r\n    \r\n    success.value = 'Şifre başarıyla güncellendi!'\r\n    \r\n    // Şifre formunu temizle\r\n    password.currentPassword = ''\r\n    password.newPassword = ''\r\n    password.confirmPassword = ''\r\n  } catch (err: any) {\r\n    console.error('Şifre güncelleme hatası:', err)\r\n    error.value = err.response?.data?.message || 'Şifre güncellenirken bir hata oluştu'\r\n  } finally {\r\n    isLoading.value = false\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.account {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 2rem;\r\n}\r\n\r\n.container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 2rem;\r\n}\r\n\r\nh1 {\r\n  font-size: 2.5rem;\r\n  color: #333;\r\n  text-align: center;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.account-content {\r\n  display: grid;\r\n  grid-template-columns: 250px 1fr;\r\n  gap: 2rem;\r\n}\r\n\r\n.account-sidebar {\r\n  background-color: #fff;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n}\r\n\r\n.account-nav {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 1rem;\r\n}\r\n\r\n.account-nav button {\r\n  padding: 1rem;\r\n  text-align: left;\r\n  background: none;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  color: #666;\r\n  font-size: 1rem;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.account-nav button:hover {\r\n  background-color: #f5f5f5;\r\n  color: #333;\r\n}\r\n\r\n.account-nav button.active {\r\n  background-color: #42b983;\r\n  color: white;\r\n}\r\n\r\n.account-main {\r\n  background-color: #fff;\r\n  padding: 2rem;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n}\r\n\r\nh2 {\r\n  font-size: 1.8rem;\r\n  color: #2c3e50;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\nlabel {\r\n  display: block;\r\n  margin-bottom: 0.5rem;\r\n  color: #333;\r\n  font-weight: 500;\r\n}\r\n\r\ninput, textarea {\r\n  width: 100%;\r\n  padding: 0.75rem;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 1rem;\r\n}\r\n\r\ninput:focus, textarea:focus {\r\n  outline: none;\r\n  border-color: #42b983;\r\n}\r\n\r\n.btn-submit {\r\n  width: 100%;\r\n  padding: 1rem;\r\n  background-color: #42b983;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  font-size: 1.1rem;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.btn-submit:hover {\r\n  background-color: #3aa876;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .account-content {\r\n    grid-template-columns: 1fr;\r\n  }\r\n\r\n  .account {\r\n    padding: 1rem;\r\n  }\r\n\r\n  h1 {\r\n    font-size: 2rem;\r\n  }\r\n\r\n  h2 {\r\n    font-size: 1.5rem;\r\n  }\r\n\r\n  .account-nav {\r\n    flex-direction: row;\r\n    overflow-x: auto;\r\n    padding: 0.5rem;\r\n  }\r\n\r\n  .account-nav button {\r\n    white-space: nowrap;\r\n  }\r\n}\r\n</style> "
        }
    ]
}