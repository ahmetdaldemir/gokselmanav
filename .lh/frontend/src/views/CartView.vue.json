{
    "sourceFile": "frontend/src/views/CartView.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1748703730347,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1748703730347,
            "name": "Commit-0",
            "content": "<template>\r\n  <v-container class=\"py-8\">\r\n    <h1 class=\"text-h5 font-weight-bold mb-6\">Sepetim</h1>\r\n    <v-alert v-if=\"!cart.items || cart.items.length === 0\" type=\"info\" border=\"start\" class=\"mb-8\">\r\n      Sepetinizde ürün yok.\r\n    </v-alert>\r\n    <v-row v-else-if=\"cart.items && cart.items.length > 0\">\r\n      <v-col cols=\"12\" md=\"8\">\r\n        <v-card v-for=\"item in cart.items\" :key=\"item.id\" class=\"mb-4\">\r\n          <v-row align=\"center\" no-gutters>\r\n            <v-col cols=\"3\" sm=\"2\">\r\n              <v-img :src=\"item.image\" height=\"80\" class=\"rounded-lg\" />\r\n            </v-col>\r\n            <v-col cols=\"5\" sm=\"6\">\r\n              <div class=\"font-weight-bold\">{{ item.name }}</div>\r\n              <div class=\"text-primary\">{{ item.price.toLocaleString('tr-TR', {style: 'currency', currency: 'TRY'}) }}</div>\r\n            </v-col>\r\n            <v-col cols=\"4\" sm=\"4\" class=\"d-flex align-center justify-end\">\r\n              <v-btn icon @click=\"updateQuantity(item, item.quantity - 1)\" :disabled=\"item.quantity <= 1\">\r\n                <v-icon>mdi-minus</v-icon>\r\n              </v-btn>\r\n              <span class=\"mx-2\">{{ item.quantity }}</span>\r\n              <v-btn icon @click=\"updateQuantity(item, item.quantity + 1)\"><v-icon>mdi-plus</v-icon></v-btn>\r\n              <v-btn icon color=\"error\" @click=\"removeItem(item)\"><v-icon>mdi-delete</v-icon></v-btn>\r\n            </v-col>\r\n          </v-row>\r\n        </v-card>\r\n        <v-btn color=\"error\" variant=\"outlined\" @click=\"clearCart\" class=\"mt-2\">Sepeti Temizle</v-btn>\r\n      </v-col>\r\n      <v-col cols=\"12\" md=\"4\">\r\n        <v-card class=\"pa-4\">\r\n          <div class=\"d-flex justify-space-between mb-2\">\r\n            <span>Ara Toplam</span>\r\n            <span>{{ subtotal.toLocaleString('tr-TR', {style: 'currency', currency: 'TRY'}) }}</span>\r\n          </div>\r\n          <div class=\"d-flex justify-space-between mb-2\">\r\n            <span>KDV (18%)</span>\r\n            <span>{{ tax.toLocaleString('tr-TR', {style: 'currency', currency: 'TRY'}) }}</span>\r\n          </div>\r\n          <div class=\"d-flex justify-space-between font-weight-bold text-h6 mt-4 mb-4\">\r\n            <span>Toplam</span>\r\n            <span>{{ total.toLocaleString('tr-TR', {style: 'currency', currency: 'TRY'}) }}</span>\r\n          </div>\r\n          <v-btn color=\"primary\" block size=\"large\" :disabled=\"!cart.items || cart.items.length === 0\" @click=\"goToCheckout\">\r\n            Alışverişi Tamamla\r\n          </v-btn>\r\n        </v-card>\r\n      </v-col>\r\n    </v-row>\r\n    <v-row v-if=\"cart.isLoading\">\r\n      <v-col cols=\"12\" class=\"text-center\">\r\n        <v-progress-circular indeterminate color=\"primary\" size=\"48\" />\r\n      </v-col>\r\n    </v-row>\r\n  </v-container>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, onMounted } from 'vue'\r\nimport { useCartStore } from '@/stores/cart'\r\nimport { useRouter } from 'vue-router'\r\nimport { useAuthStore } from '@/stores/auth'\r\n\r\nconst cart = useCartStore()\r\nconst router = useRouter()\r\nconst authStore = useAuthStore()\r\n\r\nonMounted(() => {\r\n  cart.fetchCart()\r\n})\r\n\r\nconst subtotal = computed(() => (cart.items ? cart.items.reduce((sum, item) => sum + item.price * item.quantity, 0) : 0))\r\nconst tax = computed(() => subtotal.value * 0.18)\r\nconst total = computed(() => subtotal.value + tax.value)\r\n\r\nconst updateQuantity = (item: any, quantity: number) => {\r\n  if (quantity < 1) return\r\n  cart.updateQuantity(item.id, quantity)\r\n}\r\n\r\nconst removeItem = (item: any) => {\r\n  cart.removeFromCart(item.id)\r\n}\r\n\r\nconst clearCart = () => {\r\n  cart.clearCart()\r\n}\r\n\r\nconst goToCheckout = () => {\r\n  if (authStore.isAuthenticated) {\r\n    router.push('/cashout')\r\n  } else {\r\n    router.push('/signup')\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.text-primary {\r\n  color: #1867C0;\r\n}\r\n</style> "
        }
    ]
}