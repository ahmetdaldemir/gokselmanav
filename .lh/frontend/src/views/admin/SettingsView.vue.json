{
    "sourceFile": "frontend/src/views/admin/SettingsView.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1750621526223,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1750621532953,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,10 +109,10 @@\n \r\n const loadSettings = async () => {\r\n   try {\r\n     const response = await axios.get('/backend/settings')\r\n-    const settings = {}\r\n-    response.data.forEach(setting => {\r\n+    const settings: Record<string, string> = {}\r\n+    response.data.forEach((setting: any) => {\r\n       settings[setting.key] = setting.value\r\n     })\r\n     \r\n     // Sosyal medya ayarlarını doldur\r\n"
                }
            ],
            "date": 1750621526223,
            "name": "Commit-0",
            "content": "<template>\r\n  <div class=\"settings-view\">\r\n    <div class=\"page-header\">\r\n      <h1>Sistem Ayarları</h1>\r\n    </div>\r\n\r\n    <div class=\"settings-content\">\r\n      <!-- Sosyal Medya Ayarları -->\r\n      <div class=\"settings-section\">\r\n        <h2>Sosyal Medya Ayarları</h2>\r\n        <div class=\"settings-form\">\r\n          <div class=\"form-group\">\r\n            <label for=\"facebook\">Facebook URL</label>\r\n            <input \r\n              type=\"url\" \r\n              id=\"facebook\" \r\n              v-model=\"socialMedia.Facebook\" \r\n              placeholder=\"https://facebook.com/...\"\r\n            >\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"twitter\">Twitter URL</label>\r\n            <input \r\n              type=\"url\" \r\n              id=\"twitter\" \r\n              v-model=\"socialMedia.Twitter\" \r\n              placeholder=\"https://twitter.com/...\"\r\n            >\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"instagram\">Instagram URL</label>\r\n            <input \r\n              type=\"url\" \r\n              id=\"instagram\" \r\n              v-model=\"socialMedia.Instagram\" \r\n              placeholder=\"https://instagram.com/...\"\r\n            >\r\n          </div>\r\n          <button @click=\"saveSocialMedia\" class=\"btn-save\" :disabled=\"isLoading\">\r\n            {{ isLoading ? 'Kaydediliyor...' : 'Sosyal Medya Ayarlarını Kaydet' }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Genel Ayarlar -->\r\n      <div class=\"settings-section\">\r\n        <h2>Genel Ayarlar</h2>\r\n        <div class=\"settings-form\">\r\n          <div class=\"form-group\">\r\n            <label for=\"siteName\">Site Adı</label>\r\n            <input \r\n              type=\"text\" \r\n              id=\"siteName\" \r\n              v-model=\"general.siteName\" \r\n              placeholder=\"Site adı\"\r\n            >\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"contactEmail\">İletişim E-posta</label>\r\n            <input \r\n              type=\"email\" \r\n              id=\"contactEmail\" \r\n              v-model=\"general.contactEmail\" \r\n              placeholder=\"info@example.com\"\r\n            >\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"phone\">Telefon</label>\r\n            <input \r\n              type=\"tel\" \r\n              id=\"phone\" \r\n              v-model=\"general.phone\" \r\n              placeholder=\"+90 555 123 45 67\"\r\n            >\r\n          </div>\r\n          <button @click=\"saveGeneral\" class=\"btn-save\" :disabled=\"isLoading\">\r\n            {{ isLoading ? 'Kaydediliyor...' : 'Genel Ayarları Kaydet' }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Mesajlar -->\r\n      <div v-if=\"message\" :class=\"['message', messageType]\">\r\n        {{ message }}\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, reactive, onMounted } from 'vue'\r\nimport axios from 'axios'\r\n\r\nconst isLoading = ref(false)\r\nconst message = ref('')\r\nconst messageType = ref('success')\r\n\r\nconst socialMedia = reactive({\r\n  Facebook: '',\r\n  Twitter: '',\r\n  Instagram: ''\r\n})\r\n\r\nconst general = reactive({\r\n  siteName: '',\r\n  contactEmail: '',\r\n  phone: ''\r\n})\r\n\r\nconst loadSettings = async () => {\r\n  try {\r\n    const response = await axios.get('/backend/settings')\r\n    const settings = {}\r\n    response.data.forEach(setting => {\r\n      settings[setting.key] = setting.value\r\n    })\r\n    \r\n    // Sosyal medya ayarlarını doldur\r\n    socialMedia.Facebook = settings.Facebook || ''\r\n    socialMedia.Twitter = settings.Twitter || ''\r\n    socialMedia.Instagram = settings.Instagram || ''\r\n    \r\n    // Genel ayarları doldur\r\n    general.siteName = settings.siteName || ''\r\n    general.contactEmail = settings.contactEmail || ''\r\n    general.phone = settings.phone || ''\r\n  } catch (error) {\r\n    console.error('Ayarlar yüklenemedi:', error)\r\n    showMessage('Ayarlar yüklenirken bir hata oluştu', 'error')\r\n  }\r\n}\r\n\r\nconst saveSocialMedia = async () => {\r\n  try {\r\n    isLoading.value = true\r\n    const settings = [\r\n      { key: 'Facebook', value: socialMedia.Facebook },\r\n      { key: 'Twitter', value: socialMedia.Twitter },\r\n      { key: 'Instagram', value: socialMedia.Instagram }\r\n    ]\r\n    \r\n    for (const setting of settings) {\r\n      if (setting.value) {\r\n        await axios.post('/backend/settings', setting)\r\n      }\r\n    }\r\n    \r\n    showMessage('Sosyal medya ayarları başarıyla kaydedildi!', 'success')\r\n  } catch (error) {\r\n    console.error('Sosyal medya ayarları kaydedilemedi:', error)\r\n    showMessage('Sosyal medya ayarları kaydedilirken bir hata oluştu', 'error')\r\n  } finally {\r\n    isLoading.value = false\r\n  }\r\n}\r\n\r\nconst saveGeneral = async () => {\r\n  try {\r\n    isLoading.value = true\r\n    const settings = [\r\n      { key: 'siteName', value: general.siteName },\r\n      { key: 'contactEmail', value: general.contactEmail },\r\n      { key: 'phone', value: general.phone }\r\n    ]\r\n    \r\n    for (const setting of settings) {\r\n      if (setting.value) {\r\n        await axios.post('/backend/settings', setting)\r\n      }\r\n    }\r\n    \r\n    showMessage('Genel ayarlar başarıyla kaydedildi!', 'success')\r\n  } catch (error) {\r\n    console.error('Genel ayarlar kaydedilemedi:', error)\r\n    showMessage('Genel ayarlar kaydedilirken bir hata oluştu', 'error')\r\n  } finally {\r\n    isLoading.value = false\r\n  }\r\n}\r\n\r\nconst showMessage = (msg: string, type: 'success' | 'error') => {\r\n  message.value = msg\r\n  messageType.value = type\r\n  setTimeout(() => {\r\n    message.value = ''\r\n  }, 3000)\r\n}\r\n\r\nonMounted(() => {\r\n  loadSettings()\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.settings-view {\r\n  padding: 1rem;\r\n}\r\n\r\n.page-header {\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.page-header h1 {\r\n  font-size: 2rem;\r\n  color: #2c3e50;\r\n  margin: 0;\r\n}\r\n\r\n.settings-content {\r\n  display: grid;\r\n  gap: 2rem;\r\n}\r\n\r\n.settings-section {\r\n  background-color: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n  padding: 2rem;\r\n}\r\n\r\n.settings-section h2 {\r\n  font-size: 1.5rem;\r\n  color: #2c3e50;\r\n  margin-bottom: 1.5rem;\r\n  border-bottom: 2px solid #42b983;\r\n  padding-bottom: 0.5rem;\r\n}\r\n\r\n.settings-form {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1.5rem;\r\n}\r\n\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.form-group label {\r\n  font-weight: 500;\r\n  color: #333;\r\n}\r\n\r\n.form-group input {\r\n  padding: 0.75rem;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 1rem;\r\n}\r\n\r\n.form-group input:focus {\r\n  outline: none;\r\n  border-color: #42b983;\r\n}\r\n\r\n.btn-save {\r\n  padding: 1rem 2rem;\r\n  background-color: #42b983;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  font-size: 1rem;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s;\r\n  align-self: flex-start;\r\n}\r\n\r\n.btn-save:hover:not(:disabled) {\r\n  background-color: #3aa876;\r\n}\r\n\r\n.btn-save:disabled {\r\n  background-color: #ccc;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.message {\r\n  padding: 1rem;\r\n  border-radius: 4px;\r\n  font-weight: 500;\r\n}\r\n\r\n.message.success {\r\n  background-color: #e8f5e9;\r\n  color: #2e7d32;\r\n  border: 1px solid #c8e6c9;\r\n}\r\n\r\n.message.error {\r\n  background-color: #ffebee;\r\n  color: #c62828;\r\n  border: 1px solid #ffcdd2;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .settings-view {\r\n    padding: 0.5rem;\r\n  }\r\n  \r\n  .settings-section {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .page-header h1 {\r\n    font-size: 1.5rem;\r\n  }\r\n}\r\n</style> "
        }
    ]
}